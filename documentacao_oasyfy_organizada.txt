# Documentação da API Oasy.fy

## Índice
1. [Introdução](#introdução)
2. [Autenticação](#autenticação)
3. [Tratamento de Erros](#tratamento-de-erros)
4. [Enums e Tipos de Dados](#enums-e-tipos-de-dados)
5. [Cálculo de Valores](#cálculo-de-valores)
6. [Split de Pagamentos](#split-de-pagamentos)
7. [Webhooks](#webhooks)
8. [Endpoints da API](#endpoints-da-api)
9. [Status da API](#status-da-api)
10. [Consultas](#consultas)

---

## Introdução

### Sobre a API
Bem-vindo(a) à documentação da API da Oasy.fy, onde fornecemos todas as ferramentas necessárias para que você possa integrar facilmente funcionalidades de pagamentos e gerenciamento financeiro em sua aplicação. 

A API permite realizar operações como:
- Recebimentos via Pix, boleto ou cartão
- Saques e transferências
- Consulta de saldos e históricos de pagamento

Nossa API é projetada com foco na segurança e na facilidade de uso, garantindo que você possa implementar funcionalidades complexas com simplicidade e confiabilidade.

### Requisições e URL Base
A API da Oasy.fy é construída sobre os princípios REST, utilizando HTTPS em todas as requisições para garantir a segurança, a integridade e a privacidade dos seus dados.

**URL Base:** `https://app.oasyfy.com/api/v1`

### Formato de Respostas
A API utiliza padrões de resposta HTTP para indicar o sucesso ou falha de operações:

- **200 OK**: A requisição foi bem-sucedida
- **201 Created**: A requisição foi bem-sucedida e um novo recurso foi criado
- **400 Bad Request**: A requisição não foi bem-sucedida devido a erros de validação ou dados inválidos
- **401 Unauthorized**: A requisição não foi bem-sucedida devido a falta de autenticação ou token inválido
- **404 Not Found**: O recurso solicitado não foi encontrado
- **500 Internal Server Error**: Ocorreu um erro interno no servidor

### Suporte e Dúvidas
Se tiver dúvidas ou precisar de assistência técnica, nossa equipe de suporte está disponível para ajudá-lo. Visite nossa seção de FAQ ou entre em contato através do nosso suporte técnico.

---

## Autenticação

### Obtenção de Credenciais
Para utilizar nossa API, você precisa de credenciais válidas, que incluem uma chave pública e uma chave privada. Estas credenciais podem ser obtidas através do painel de controle de sua conta na Oasy.fy.

### Como Obter suas Credenciais
1. **Acesse o Painel de Controle**: Entre no seu perfil na dashboard da Oasy.fy
2. **Navegue até a Seção API**: Localize a opção de API, na aba de integrações do menu lateral
3. **Gerar Credenciais**: Se você ainda não possui credenciais ou precisa de um novo conjunto, clique no botão "Gerar credenciais"
4. **Salvar Credenciais**: Uma vez geradas, suas chaves serão exibidas. Copie e guarde-as em um local seguro. As chaves não serão mostradas novamente

### Uso das Credenciais para Autenticação
Para acessar qualquer rota da nossa API, você deve incluir duas chaves nos cabeçalhos da requisição (headers):

- `x-public-key`: sua chave pública
- `x-secret-key`: sua chave secreta

### Exemplo de Uso com Axios
```javascript
await axios.get('https://app.oasyfy.com/api/v1', {
    headers: {
        'x-public-key': 'SUA_CHAVE_PUBLICA_AQUI',
        'x-secret-key': 'SUA_CHAVE_PRIVADA_AQUI',
    },
});
```

### Boas Práticas de Segurança
- **Segurança de Chaves**: Nunca compartilhe suas chaves privadas. Armazene-as de maneira segura e trate-as como senhas
- **Conexão Segura**: Utilize sempre HTTPS para garantir que suas requisições sejam criptografadas
- **Monitoramento**: Monitore regularmente o acesso à sua API para detectar qualquer atividade suspeita

### Perguntas Frequentes
- O que fazer se eu perder minha chave privada?
- O que fazer se suspeitar que minhas credenciais foram comprometidas?
- Como posso garantir que minhas chaves sejam armazenadas com segurança?
- Existem limites para a quantidade de requisições que posso fazer usando minhas credenciais?

**Suporte**: contato@oasispay.com.br

---

## Tratamento de Erros

### Formato do Objeto de Erro
Quando um erro ocorre durante o processamento de uma requisição na API da Oasy.fy, a resposta é um objeto JSON que segue o formato abaixo:

```json
{
  "statusCode": 500,
  "errorCode": "GATEWAY_INTERNAL_SERVER_ERROR",
  "message": "Mensagem detalhada sobre o erro",
  "details": {
    "campo1": "Detalhes sobre o campo 1",
    "campo2": "Detalhes sobre o campo 2"
  }
}
```

### Campos do Objeto de Erro
- **statusCode** (number): O código HTTP do erro
- **errorCode** (string): O código de erro da API
- **message** (string): Uma mensagem de erro detalhada
- **details** (any): Detalhes adicionais sobre o erro (opcional)

### Códigos de Erro Completos
| Código de Erro | Descrição |
|---|---|
| GATEWAY_INTERNAL_SERVER_ERROR | Erro genérico do servidor; algo deu errado no lado do servidor que não foi especificado mais detalhadamente |
| GATEWAY_ROUTE_NOT_FOUND | O recurso solicitado não foi encontrado |
| GATEWAY_UNAUTHORIZED | Falha na autenticação com as credenciais fornecidas |
| GATEWAY_COMPANY_NOT_FOUND | A empresa não foi encontrada |
| NOT_FOUND | O recurso requisitado não foi encontrado |
| GATEWAY_INVALID_CREDENTIALS | As credenciais fornecidas são inválidas |
| GATEWAY_NO_CREDENTIALS | As credenciais não foram fornecidas |
| GATEWAY_TRANSACTION_DENIED | A transação foi negada |
| GATEWAY_TRANSACTION_NOT_FOUND | A transação não foi encontrada |
| GATEWAY_INVALID_ARGUMENT | Um ou mais argumentos da requisição são inválidos |
| GATEWAY_PERMISSION_DENIED | O usuário não possui permissão para acessar o recurso |
| GATEWAY_FAILED_PRECONDITION | A operação foi rejeitada porque o sistema não está no estado necessário para a execução da operação |
| GATEWAY_ABORTED | A operação foi abortada, geralmente devido a uma questão de concorrência |
| GATEWAY_OUT_OF_RANGE | O valor de um argumento está fora do intervalo permitido |
| GATEWAY_UNIMPLEMENTED | A operação não está implementada |
| GATEWAY_INTERNAL | Um erro interno ocorreu enquanto tentava executar esta operação |
| GATEWAY_UNAVAILABLE | O serviço não está disponível |
| GATEWAY_DATA_LOSS | Dados críticos foram perdidos devido a um erro |
| GATEWAY_UNAUTHENTICATED | A requisição requer autenticação, mas ela não foi fornecida |
| GATEWAY_INVALID_DATA | Os dados fornecidos são inválidos |
| GATEWAY_NO_BODY | O corpo da requisição não foi fornecido |
| GATEWAY_NO_SPLIT_ACCOUNT | A conta de split não foi encontrada |
| GATEWAY_NOT_OWNER | O usuário não é o proprietário dos recursos |

---

## Enums e Tipos de Dados

### Status de Transação
- **COMPLETED** - Transação concluída
- **PENDING** - Transação pendente
- **FAILED** - Transação falhou
- **REFUNDED** - Transação estornada
- **CHARGED_BACK** - Transação com chargeback

### Métodos de Pagamento
- **PIX** - Pix
- **BOLETO** - Boleto
- **CREDIT_CARD** - Cartão
- **SPLIT** - Divisão de pagamento
- **TED** - Transferência
- **DYNAMIC** - Dinâmico (outros métodos)

### Tipo de Transação
- **ONCE** - Compra única
- **RECURRING** - Assinatura

---

## Cálculo de Valores

### Estrutura de Valores
Na nossa estrutura, o valor total de uma transação (amount) é composto por 4 partes:

- **shippingFee** - Frete da transação, em reais
- **extraFee** - Outras taxas (Ex: Parcelamento), em reais
- **discount** - Desconto da transação, em reais
- **products[n].price** - Preço do produto, em reais
- **products[n].quantity** - Quantidade do produto

### Como Calcular
Para calcular corretamente o valor total de um pedido, você deve somar o preço de cada produto multiplicado pela sua quantidade, adicionar o frete e subtrair o desconto.

**Exemplo:**
```javascript
// Lista de produtos
const products = [
    { price: 10, quantity: 2 },
    { price: 20, quantity: 1 }
]

// Taxa de frete
const shippingFee = 5

// Taxa de parcelamento
const extraFee = 20

// Desconto
const discount = 5

// Cálculo do valor total dos produtos
const totalProducts = products.reduce((acc, product) => {
    return acc + product.price * product.quantity
}, 0)
// Soma dos Produtos = 40

// Valor total da venda, que o cliente vai pagar
const amount = totalProducts + shippingFee + extraFee - discount

// Resultado final: R$ 60.00
```

---

## Split de Pagamentos

### Dividindo Pagamentos com Splits
Nas rotas de pagamento (Receber PIX, Receber Cartão e Receber Boleto), você pode incluir um campo opcional chamado `splits` para realizar a divisão automática do valor da transação entre diferentes contas.

### Exemplo de Split
```json
{
  "splits": [
    {
      "producerId": "cm1234",
      "amount": 30.00
    },
    {
      "producerId": "cm9876",
      "amount": 20.00
    }
  ]
}
```

### Como Funciona
O campo `splits` deve ser um array de objetos, onde cada objeto representa a divisão da venda que será enviada para outro produtor. Cada objeto deve conter:

- **producerId** - ID da conta que receberá o split
- **amount** - Valor (em BRL) a ser repassado para essa conta

**Importante**: O somatório dos `amount` dentro de `splits` não pode exceder o valor total da transação.

Caso não envie nenhum `splits`, 100% do valor será destinado à conta principal que está realizando o pagamento.

---

## Webhooks

### O que são Webhooks
Os webhooks são usados para notificar automaticamente o seu sistema sobre eventos significativos. Eles são enviados como requisições HTTP POST para as URLs configuradas, contendo dados no formato JSON.

### Formato do Objeto de Webhook
```json
{
  "event": "nome do evento",
  "token": "token gerado para validação",
  "offerCode": "Código da oferta quando é venda no checkout interno",
  "client": {
    "id": "identificador do cliente",
    "name": "nome do cliente",
    "email": "email do cliente",
    "phone": "telefone do cliente",
    "cpf": "CPF do cliente", // ou null
    "cnpj": "CNPJ do cliente", // ou null
    "address": {
      "country": "código do país ex: BR",
      "zipCode": "cep no formato 12345-678",
      "state": "código do estado ex: SP",
      "city": "cidade",
      "neighborhood": "bairro",
      "street": "rua",
      "number": "número",
      "complement": "complemento"
    }
  },
  "transaction": {
    "id": "identificador da transação",
    "identifier": "Seu identificador da transação",
    "status": "status da transação",
    "paymentMethod": "método de pagamento",
    "originalCurrency": "moeda do cliente",
    "originalAmount": "valor da transação na moeda do cliente", // numérico
    "currency": "sua moeda de recebimento",
    "exchangeRate": "quando a moeda do cliente não for BRL", // numérico
    "amount": "valor na sua moeda de recebimento", // numérico
    "createdAt": "data e hora da criação da cobrança", // string ISO
    "payedAt": "data e hora do pagamento", // string ISO ou null
    "pixInformation": {
      "qrCode": "00020101065465468949845BR.GOV.BCB.PIX2566api-h.rendimento.com.br/q/v2/cobv/6f6857274e864ae7b595291a9e5fe6b5520465481245802BR5920GalaxPay Integracoes6014Belo Horizonte6108304116646822070503***6304CD3B", // string
      "endToEndId": "E123456789012345678901234567890123456789012345" // string ou null, informado quando o PIX é Pago
    },
    "pixMetadata": {
      "payerDocument": "Documento do pagador", // string ou null
      "payerName": "Nome do pagador", // string ou null
      "payerBankName": "Nome do banco do pagador", // string ou null
      "payerBankAccount": "Conta bancária do pagador", // string ou null
      "payerBankBranch": "Agência bancária do pagador", // string ou null
      "receiverDocument": "Documento do recebedor", // string ou null
      "receiverName": "Nome do recebedor", // string ou null
      "receiverPixKey": "Chave PIX do recebedor", // string ou null
      "receiverBankName": "Nome do banco do recebedor", // string ou null
      "receiverBankAccount": "Conta bancária do recebedor", // string ou null
      "receiverBankBranch": "Agência bancária do recebedor" // string ou null
    }
  },
  "subscription": {
    "id": "identificador da assinatura", // string
    "identifier": "Seu identificador da assinatura", // string
    "cycle": "número sequencial da cobrança", // number | Quando for 1º -> 1 a 2ª -> 2, etc..
    "startAt": "data e hora de início", // string ISO
    "intervalType": "tipo de frequência da cobrança", // "DAYS" | "WEEKS" | "MONTHS" | "YEARS"
    "intervalCount": "frequência da cobrança" // number
  },
  "orderItems": [
    {
      "id": "identificador do item",
      "price": "valor total do item", // numérico
      "product": {
        "id": "identificador do produto",
        "name": "nome do produto",
        "externalId": "seu identificador do produto, para vendas via api"
      }
    }
  ],
  "trackProps": {
    "key": "value",
    "key1": "value1"
  }
}
```

### Possíveis Eventos
- **TRANSACTION_CREATED** - Transação criada
- **TRANSACTION_PAID** - Transação paga
- **TRANSACTION_CANCELED** - Transação cancelada
- **TRANSACTION_REFUNDED** - Transação estornada

### Configuração de Webhooks

#### 1. Webhooks Cadastrados Internamente
- Configurados diretamente no painel da Oasy.fy
- Ideais para produtores que utilizam a plataforma Oasy.fy para gerenciar suas vendas
- Configuração simples e centralizada

**Como configurar:**
1. Acesse o painel da Oasy.fy
2. Navegue até Configurações > Webhooks
3. Clique no botão "Criar" e preencha os campos necessários

#### 2. Webhooks via API
- Configurados diretamente pelo produtor através de chamadas à API
- Ideais para integrações mais avançadas
- Maior flexibilidade para integrar diferentes fluxos de pagamento

**Como configurar:**
1. Realize uma requisição POST para a rota específica do método desejado
2. Envie o `callbackUrl` como um dos parâmetros
3. No retorno da requisição, será retornado um token para validação

### Exemplo Completo de Webhook
```json
{
  "event": "TRANSACTION_PAID",
  "token": "tbdeizos8f",
  "offerCode": "ABCK181",
  "client": {
    "id": "eep4xpu60s",
    "name": "John Doe",
    "email": "jondoe@gmail.com",
    "phone": "(11) 9 8888-7777",
    "cpf": "123.456.789-10",
    "cnpj": null,
    "address": {
      "country": "BR",
      "zipCode": "01304-000",
      "state": "SP",
      "city": "São Paulo",
      "neighborhood": "Consolação",
      "street": "Rua Augusta",
      "number": "6312",
      "complement": "6 andar"
    }
  },
  "transaction": {
    "id": "mdshbx2qli",
    "status": "COMPLETED",
    "paymentMethod": "CREDIT_CARD",
    "originalCurrency": "USD",
    "originalAmount": 20,
    "currency": "BRL",
    "amount": 100,
    "exchangeRate": 5,
    "createAt": "2025-09-15T01:30:27.944Z",
    "payedAt": "2025-09-15T01:31:27.944Z",
    "pixInformation": {
      "qrCode": "00020101br.gov.bcb.pix2563pix-h.exemplo.com/pix...",
      "endToEndId": "E123456789012345678901234567890123456789012345"
    },
    "pixMetadata": {
      "payerDocument": "123.456.789-00",
      "payerName": "João da Silva",
      "payerBankName": "Caixa Economica Federal",
      "payerBankAccount": "12345",
      "payerBankBranch": "12",
      "receiverDocument": "987.654.321-00",
      "receiverName": "Maria da Silva",
      "receiverPixKey": "98765432100",
      "receiverBankName": "Banco do Brasil",
      "receiverBankAccount": "54321",
      "receiverBankBranch": "21"
    }
  },
  "subscription": null,
  "orderItems": [
    {
      "id": "l405zg7e37",
      "price": 100,
      "product": {
        "id": "owmlnpmegt",
        "name": "Curso de marketing",
        "externalId": "KSA912"
      }
    }
  ],
  "trackProps": {
    "utm_id": "12345",
    "utm_source": "facebook",
    "utm_medium": "cpc",
    "utm_campaign": "lancamento",
    "utm_content": "newsletter",
    "utm_term": "summer+venda",
    "fbc": "fb.1.1234567890.0987654321",
    "fbp": "fb.1.0987654321.1234567890",
    "ip": "179.241.195.127",
    "country": "BR",
    "user_agent": "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Mobile Safari/537.36",
    "zip_code": "01304-000",
    "city": "São Paulo",
    "state": "SP"
  }
}
```

### Resposta aos Webhooks
Após processar um webhook, o endpoint do seu sistema deve retornar um status HTTP 2XX para indicar que o webhook foi recebido e processado com sucesso.

---

## Webhooks de Transferência

### Formato do Objeto de Webhook de Transferência
Quando uma atualização no status de uma transferência ocorre, a Oasy.fy envia uma notificação para o endpoint configurado com os dados da transferência:

```json
{
  "event": "nome do evento",
  "token": "token gerado para validação",
  "withdraw": {
    "id": "id da transferência",
    "clientIdentifier": "Seu identificador da transação",
    "amount": "valor solicitado na sua moeda de recebimento", // numérico
    "receivedAmount": "valor enviado na sua moeda de recebimento", // numérico
    "feeAmount": "valor da taxa aplicada na sua moeda de recebimento", // numérico
    "currency": "sua moeda de recebimento",
    "status": "status da transação",
    "createdAt": "data e hora da criação da cobrança", // string ISO
    "updatedAt": "data e hora da atualização da cobrança" // string ISO
  },
  "payoutAccount": {
    "id": "id da conta de pagamento",
    "status": "status da conta de pagamento",
    "ownerName": "nome do titular da conta",
    "ownerDocument": "documento do titular da conta",
    "pix": "chave pix",
    "pixType": "tipo da chave pix",
    "createdAt": "data e hora da criação da conta de pagamento", // string ISO
    "updatedAt": "data e hora da atualização da conta de pagamento", // string ISO
    "deletedAt": "data e hora da exclusão da conta de pagamento" // string ISO, pode ser nulo
  },
  "sents": [
    {
      "id": "id do envio",
      "amount": "valor do envio",
      "endToEndId": "endToEndId PIX do envio",
      "pixMetadata": {
        "payerDocument": "Documento do pagador", // string ou null
        "payerName": "Nome do pagador", // string ou null
        "payerBankName": "Nome do banco do pagador", // string ou null
        "payerBankAccount": "Conta do pagador", // string ou null
        "payerBankBranch": "Agência do pagador", // string ou null
        "receiverDocument": "Documento do recebedor", // string ou null
        "receiverName": "Nome do recebedor", // string ou null
        "receiverPixKey": "Chave PIX do recebedor", // string ou null
        "receiverBankName": "Nome do banco do recebedor", // string ou null
        "receiverBankAccount": "Conta do recebedor", // string ou null
        "receiverBankBranch": "Agência do recebedor" // string ou null
      },
      "createdAt": "data e hora da criação do envio"
    }
  ]
}
```

### Eventos de Transferência
- **TRANSFER_CREATED** - Transferência solicitada
- **TRANSFER_COMPLETED** - Transferência paga
- **TRANSFER_FAILED** - Transferência cancelada

### Status de Transferência
- **COMPLETED** - Transferência concluída (paga)
- **CANCELED** - Transferência cancelada
- **PENDING** - Transferência pendente
- **PROCESSING** - Transferência em processamento
- **TRANSFERRING** - Transferência em andamento

### Exemplo de Webhook de Transferência
```json
{
  "event": "TRANSFER_CREATED",
  "token": "fyjpov",
  "withdraw": {
    "id": "pdiqext683",
    "clientIdentifier": "123456",
    "amount": 100,
    "receivedAmount": 0,
    "feeAmount": 10,
    "currency": "BRL",
    "status": "PENDING",
    "createdAt": "2025-09-15T01:31:47.733Z",
    "updatedAt": "2025-09-15T01:31:47.733Z"
  },
  "payoutAccount": {
    "id": "2o0vuks5of",
    "status": "ACTIVE",
    "ownerName": "João da Silva",
    "ownerDocument": "123.456.789-00",
    "pix": "cliente@gmail.com",
    "pixType": "email",
    "createdAt": "2025-09-15T01:31:47.733Z",
    "updatedAt": "2025-09-15T01:31:47.733Z",
    "deletedAt": null
  },
  "sents": [
    {
      "id": "s1o7pzffg4",
      "amount": 100,
      "endToEndId": "E2RQ4DTI7ZP8",
      "pixMetadata": {
        "payerDocument": "123.456.789-00",
        "payerName": "João da Silva",
        "payerBankName": "Caixa Economica Federal",
        "payerBankAccount": "12345",
        "payerBankBranch": "0001",
        "receiverDocument": "987.654.321-00",
        "receiverName": "Maria da Silva",
        "receiverPixKey": "98765432100",
        "receiverBankName": "Banco do Brasil",
        "receiverBankAccount": "54321",
        "receiverBankBranch": "21"
      },
      "createdAt": "2025-09-15T01:31:47.733Z"
    }
  ]
}
```

---

## Endpoints da API

### Status da API
**GET** `/ping`

Verificação rápida de status da API. Útil para monitoramento e operações de health check.

**Retorno:**
- **200 OK**
  - `message` (string): String de confirmação de que o servidor está online

**Exemplo de Retorno:**
```json
{
  "message": "pong"
}
```

### Meus Dados
**GET** `/gateway/producer`

Obtém informações do produtor, como nome, e-mail, telefone e endereço.

**Retorno:**
- **200 OK**
  - `name` (string): Nome do produtor
  - `email` (string): E-mail do produtor
  - `phone` (string): Telefone do produtor formatado como (99) 99999-9999
  - `document` (string): Documento do produtor (CPF ou CNPJ)
  - `address` (object): Endereço do produtor/empresa
  - `legalRepresentative` (object): Informações do representante legal da empresa

**Exemplo de Retorno:**
```json
{
  "name": "John Doe",
  "email": "john@mail.com",
  "phone": "(11) 99999-9999",
  "document": "123.456.789-00",
  "address": {
    "zipCode": "12345-000",
    "country": "BR",
    "state": "SP",
    "city": "São Paulo",
    "neighborhood": "Alphaville",
    "street": "Rua das Flores",
    "number": "12",
    "complement": "Casa azul"
  }
}
```

### Meu Saldo
**GET** `/gateway/producer/balance`

Obtém o saldo atual da conta do produtor.

**Retorno:**
- **200 OK**
  - `available` (number): Saldo disponível para saque
  - `pending` (number): Saldo pendente
  - `fundLock` (number): Saldo retido

**Exemplo de Retorno:**
```json
{
  "available": 12345.67,
  "pending": 999.99,
  "fundLock": 0
}
```

### Buscar Transação
**GET** `/gateway/transactions`

Busca uma transação específica pelo seu ID.

**Query Parameters:**
- `id` (string): ID da transação
- `clientIdentifier` (string): Identificador do cliente

**Retorno:**
- **200 OK**
  - `id` (string): ID da transação
  - `clientIdentifier` (string): Identificador do cliente
  - `currency` (enum): Moeda da transação (ARS, BRL, CAD, COP, EUR, GBP, JPY, MXN, MZN, USD, CNY, SAR, BDM, ETH, BNB, BTC, USDT, USDC)
  - `amount` (number): Valor total da transação
  - `chargeAmount` (number): Valor pago pelo cliente
  - `exchangeRate` (number): Taxa de câmbio utilizada
  - `producerExtraAmount` (number): Valor de taxa extra cobrada pelo produtor
  - `status` (enum): Status da transação (PENDING, COMPLETED, FAILED, REFUNDED, CHARGED_BACK)
  - `statusDescription` (string): Descrição do status da transação
  - `purchaseType` (enum): Tipo de compra (ONCE, RECURRING)
  - `paymentMethod` (enum): Método de pagamento (PIX, CREDIT_CARD, BOLETO, TED, SPLIT, CRYPTO, DYNAMIC)
  - `details` (string): Detalhes da transação
  - `errorDescription` (string): Descrição do erro, caso a transação tenha falhado
  - `webhookUrl` (string): URL do webhook configurado para essa transação
  - `createdAt` (string): Data de criação da transação
  - `availableAt` (string): Data em que a transação estará disponível para saque
  - `payedAt` (string): Data em que a transação foi paga pelo cliente
  - `refundedAt` (string): Data em que a transação foi estornada
  - `boletoInformation` (object): Informações do boleto gerado para essa transação
  - `pixInformation` (object): Informações do PIX gerado para essa transação
  - `pixMetadata` (object): Informações adicionais sobre o PIX

**Exemplo de Retorno:**
```json
{
  "id": "cmry2h8332sgs3ub44fh7",
  "clientIdentifier": "5286-412312-asd-123",
  "currency": "BRL",
  "amount": 49.8,
  "chargeAmount": 49.8,
  "exchangeRate": 1,
  "producerExtraAmount": 0,
  "status": "FAILED",
  "statusDescription": null,
  "purchaseType": "ONCE",
  "paymentMethod": "PIX",
  "details": null,
  "errorDescription": "Transaction denied by anti-fraud",
  "webhookUrl": null,
  "availableAt": null,
  "createdAt": "2025-09-15T01:27:46.870Z",
  "refundedAt": null,
  "payedAt": null,
  "boletoInformation": null,
  "pixInformation": {
    "base64": null,
    "qrCode": "00020101065465468949845BR.GOV.BCB.PIX2566api-h.rendimento.com.br/q/v2/cobv/6f6857274e864ae7b595291a9e5fe6b5520465481245802BR5920GalaxPay Integracoes6014Belo Horizonte6108304116646822070503***6304CD3B",
    "image": "https://upload.wikimedia.org/wikipedia/commons/f/fa/Link_pra_pagina_principal_da_Wikipedia-PT_em_codigo_QR_b.svg"
  },
  "pixMetadata": {
    "payerBankName": "Caixa Economica Federal",
    "payerDocument": "123.456.789-00",
    "payerName": "João da Silva",
    "receiverBankName": "Banco do Brasil",
    "receiverDocument": "987.654.321-00",
    "receiverName": "Maria da Silva",
    "receiverPixKey": "98765432100"
  }
}
```

### Buscar Assinaturas
**GET** `/gateway/subscriptions`

Busca uma lista de assinaturas com base nos filtros informados.

**Query Parameters:**
- `transactionId` (string): ID da transação
- `subscriptionId` (string): ID da assinatura
- `orderId` (string): ID do pedido
- `clientIdentifier` (string): Identificador do cliente
- `clientEmail` (string): Email do cliente

**Retorno:**
- **200 OK**
  - `subscriptions` (array): Lista de assinaturas

**Exemplo de Retorno:**
```json
{
  "subscriptions": [
    {
      "id": "cm8xja4ab000k6q62wpwv5722",
      "startAt": "2025-03-31T20:40:37.426Z",
      "intervalType": "MONTHS",
      "intervalCount": 1,
      "status": "ACTIVE",
      "cycle": 1,
      "items": [
        {
          "id": "cm8tgm0lj002w6n8sdx7ko4pq",
          "isBump": false,
          "productId": "clz02cs9j0001miylmwcvnjjp",
          "productName": "Newsletter"
        }
      ]
    }
  ]
}
```

### Receber PIX
**POST** `/gateway/pix/receive`

Endpoint para receber pagamentos via Pix.

**Body:**
- `identifier` (string, obrigatório): Identificador único da transação
- `amount` (number, obrigatório): Valor da transação, em reais
- `shippingFee` (number): Frete da transação, em reais
- `extraFee` (number): Outras taxas, em reais
- `discount` (number): Desconto da transação, em reais
- `client` (object, obrigatório): Dados do cliente
- `products` (array): Lista de produtos da transação
- `splits` (array): Lista de splits da transação
- `dueDate` (string): Data de vencimento da cobrança (YYYY-MM-DD)
- `metadata` (object): Metadados da transação
- `callbackUrl` (string): URL para notificação de alteração de status

**Exemplo de Requisição:**
```json
{
  "identifier": "8rua7geetq",
  "amount": 100.5,
  "client": {
    "name": "João da Silva",
    "email": "joao@gmail.com",
    "phone": "(11) 99999-9999",
    "document": "123.456.789-00"
  },
  "products": [
    {
      "id": "psv2rxdw54wt",
      "name": "Produto 1",
      "quantity": 1,
      "price": 80
    },
    {
      "id": "vpxxctf58kem",
      "name": "Produto 2",
      "quantity": 2,
      "price": 10.25
    }
  ],
  "dueDate": "2025-09-16",
  "metadata": {
    "key1": "value1",
    "key2": "value2"
  },
  "callbackUrl": "https://minha.api.com/pix/callback/vjtwztsis0"
}
```

**Retorno:**
- **201 OK**
  - `transactionId` (string): ID único da transação, criado por nós. Guarde esse ID para futuras consultas
  - `status` (enum): Status atual da transação (OK, FAILED, PENDING, REJECTED, CANCELED)
  - `fee` (number): Valor da taxa cobrada pela transação
  - `order` (object): Dados do pedido
  - `pix` (object): Dados do pagamento PIX
  - `details` (string): Detalhes adicionais sobre a transação
  - `errorDescription` (string): Descrição do erro, caso a transação tenha falhado

- **400 Bad Request**
  - `statusCode` (number): Código HTTP do erro
  - `errorCode` (string): Código do erro
  - `message` (string): Mensagem de erro
  - `details` (object): Detalhes do erro

**Exemplo de Retorno:**
```json
{
  "transactionId": "clwuwmn4i0007emp9lgn66u1h",
  "status": "OK",
  "order": {
    "id": "cm92389asdaskdjkasjdka",
    "url": "https://api-de-pagamentos.com/order/cm92389asdaskdjkasjdka",
    "receiptUrl": "https://api-de-pagamentos.com/order/cm92389asdaskdjkasjdka/receipt"
  },
  "pix": {
    "code": "00020101021126530014BR.GOV.BCB.PIX0136254e-7f7b-4f4a-8e4b-2b5b3d3b3d3d52040000530398654041.005802BR5923Nome do Beneficiário6008Brasília62070503***6304A8E3",
    "base64": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABjElEQVR42mNk",
    "image": "https://api.gateway.com/pix/qr/00020101021126530014BR.GOV.BCB.PIX0136254e-7f7b-4f4a-8e4b-2b5b3d3b3d3d52040000530398654041.005802BR5923Nome do Beneficiário6008Brasília62070503***6304A8E3"
  }
}
```

### Assinatura PIX
**POST** `/gateway/pix/subscription`

Endpoint para criar assinaturas via PIX.

**Body:**
- `identifier` (string, obrigatório): Identificador único da transação
- `amount` (number, obrigatório): Valor da transação, em reais
- `client` (object, obrigatório): Dados do cliente
- `product` (object, obrigatório): Dados do produto
- `dueDate` (string): Data de vencimento da cobrança (YYYY-MM-DD)
- `metadata` (object): Metadados da transação
- `subscription` (object, obrigatório): Configurações da assinatura
- `callbackUrl` (string): URL para notificação de alteração de status

**Exemplo de Requisição:**
```json
{
  "identifier": "lhlpq4tvrh",
  "amount": 80,
  "client": {
    "name": "João da Silva",
    "email": "joao@gmail.com",
    "phone": "(11) 99999-9999",
    "document": "123.456.789-00"
  },
  "product": {
    "id": "ims1jsssfar8",
    "name": "Produto 1",
    "quantity": 1,
    "price": 80
  },
  "dueDate": "2025-09-16",
  "metadata": {
    "key1": "value1",
    "key2": "value2"
  },
  "subscription": {
    "periodicityType": "MONTHS",
    "periodicity": 1,
    "firstChargeIn": 0
  },
  "callbackUrl": "https://minha.api.com/pix/callback/2cb2z61zib"
}
```

**Exemplo de Retorno:**
```json
{
  "transactionId": "clwuwmn4i0007emp9lgn66u1h",
  "status": "OK",
  "pix": {
    "code": "00020101021126530014BR.GOV.BCB.PIX0136254e-7f7b-4f4a-8e4b-2b5b3d3b3d3d52040000530398654041.005802BR5923Nome do Beneficiário6008Brasília62070503***6304A8E3",
    "base64": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABjElEQVR42mNk",
    "image": "https://api.gateway.com/pix/qr/00020101021126530014BR.GOV.BCB.PIX0136254e-7f7b-4f4a-8e4b-2b5b3d3b3d3d52040000530398654041.005802BR5923Nome do Beneficiário6008Brasília62070503***6304A8E3"
  },
  "subscription": {
    "id": "cm9hf2cly0004xwvpl5mt1yj7",
    "periodicity": 1,
    "periodicityType": "MONTHS",
    "nextChargeAt": "2025-05-14T18:38:00.021Z",
    "startAt": "2025-04-14T18:38:00.021Z",
    "status": "INACTIVE"
  }
}
```

---

## Consultas

### Moedas Suportadas
A API suporta as seguintes moedas:

**Moedas Fiat:**
- ARS, BRL, CAD, COP, EUR, GBP, JPY, MXN, MZN, USD, CNY, SAR, BDM

**Criptomoedas:**
- ETH, BNB, BTC, USDT, USDC

### Status de Transferência
- **COMPLETED** - Transferência concluída (paga)
- **CANCELED** - Transferência cancelada
- **PENDING** - Transferência pendente
- **PROCESSING** - Transferência em processamento
- **TRANSFERRING** - Transferência em andamento

### Eventos de Transferência
- **TRANSFER_CREATED** - Transferência solicitada
- **TRANSFER_COMPLETED** - Transferência paga
- **TRANSFER_FAILED** - Transferência cancelada

---

## Suporte

Para dúvidas ou assistência técnica:
- **Email**: contato@oasispay.com.br
- **FAQ**: Consulte nossa seção de perguntas frequentes
- **Suporte Técnico**: Disponível através do painel da Oasy.fy

---

*Esta documentação oferece uma visão geral completa de como usar a API da Oasy.fy. Para informações mais detalhadas sobre cada endpoint, consulte as seções específicas acima.*
